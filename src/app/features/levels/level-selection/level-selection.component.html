<div class="container py-5">
    <header class="text-center mb-5">
      <h1 class="mb-3" data-aos="fade-up">Choose Your Challenge</h1>
      <p class="lead mb-0" data-aos="fade-up" data-aos-delay="100">
        Select a difficulty level and maze to begin your adventure!
      </p>
      <div *ngIf="!isAuthenticated" class="alert alert-info mt-4 mx-auto" style="max-width: 600px;" data-aos="fade-up" data-aos-delay="200">
        <i class="bi bi-info-circle-fill me-2"></i> 
        <strong>Guest Mode:</strong> You can only play Easy levels without saving your progress. 
        <a routerLink="/auth/register" class="alert-link">Register</a> to unlock all levels and features!
      </div>
    </header>
    
    <div class="row g-4">
      <!-- Easy Levels -->
      <div class="col-lg-4" data-aos="fade-up" data-aos-delay="100">
        <div class="difficulty-category">
          <div class="difficulty-header bg-success text-white p-3 rounded-top">
            <h2 class="h4 mb-0">Easy</h2>
          </div>
          <div class="bg-white p-4 rounded-bottom shadow-sm mb-4">
            <p>Perfect for beginners. Learn the basics of maze navigation and BFS algorithm.</p>
          </div>
          
          <div class="level-grid">
            <ng-container *ngIf="easyMazes.length > 0; else loadingEasy">
              <app-level-card 
                *ngFor="let maze of easyMazes" 
                [maze]="maze"
                [isLocked]="false">
              </app-level-card>
            </ng-container>
            
            <ng-template #loadingEasy>
              <div class="text-center py-5">
                <div class="spinner-border text-primary" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2">Loading levels...</p>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
      
      <!-- Medium Levels -->
      <div class="col-lg-4" data-aos="fade-up" data-aos-delay="150">
        <div class="difficulty-category">
          <div class="difficulty-header bg-warning text-dark p-3 rounded-top">
            <h2 class="h4 mb-0">Medium</h2>
          </div>
          <div class="bg-white p-4 rounded-bottom shadow-sm mb-4">
            <p>More complex mazes with additional challenges. Test your pathfinding skills.</p>
          </div>
          
          <div class="level-grid">
            <ng-container *ngIf="mediumMazes.length > 0; else loadingMedium">
              <app-level-card 
                *ngFor="let maze of mediumMazes" 
                [maze]="maze"
                [isLocked]="!isAuthenticated || highestLevelCompleted.EASY < 5">
              </app-level-card>
            </ng-container>
            
            <ng-template #loadingMedium>
              <div class="text-center py-5">
                <div class="spinner-border text-primary" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2">Loading levels...</p>
              </div>
            </ng-template>
            
            <div *ngIf="isAuthenticated && highestLevelCompleted.EASY < 5" class="locked-message text-center p-3 mt-3 bg-light rounded">
              <i class="bi bi-lock-fill me-2"></i>
              Complete all Easy levels to unlock Medium difficulty
            </div>
            
            <div *ngIf="!isAuthenticated" class="locked-message text-center p-3 mt-3 bg-light rounded">
              <i class="bi bi-lock-fill me-2"></i>
              <a routerLink="/auth/register" class="text-primary">Register</a> to unlock Medium difficulty
            </div>
          </div>
        </div>
      </div>
      
      <!-- Hard Levels -->
      <div class="col-lg-4" data-aos="fade-up" data-aos-delay="200">
        <div class="difficulty-category">
          <div class="difficulty-header bg-danger text-white p-3 rounded-top">
            <h2 class="h4 mb-0">Hard</h2>
          </div>
          <div class="bg-white p-4 rounded-bottom shadow-sm mb-4">
            <p>Expert-level mazes with complex paths. Only for the most skilled pathfinders.</p>
          </div>
          
          <div class="level-grid">
            <ng-container *ngIf="hardMazes.length > 0; else loadingHard">
              <app-level-card 
                *ngFor="let maze of hardMazes" 
                [maze]="maze"
                [isLocked]="!isAuthenticated || highestLevelCompleted.MEDIUM < 5">
              </app-level-card>
            </ng-container>
            
            <ng-template #loadingHard>
              <div class="text-center py-5">
                <div class="spinner-border text-primary" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2">Loading levels...</p>
              </div>
            </ng-template>
            
            <div *ngIf="isAuthenticated && highestLevelCompleted.MEDIUM < 5" class="locked-message text-center p-3 mt-3 bg-light rounded">
              <i class="bi bi-lock-fill me-2"></i>
              Complete all Medium levels to unlock Hard difficulty
            </div>
            
            <div *ngIf="!isAuthenticated" class="locked-message text-center p-3 mt-3 bg-light rounded">
              <i class="bi bi-lock-fill me-2"></i>
              <a routerLink="/auth/register" class="text-primary">Register</a> to unlock Hard difficulty
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>